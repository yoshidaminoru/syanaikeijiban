<!DOCTYPE html>
<html>
<head>
    <title>社内報フィードバック掲示板</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .post { border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 5px; }
        .post-form { margin-bottom: 30px; }
        textarea { width: 100%; height: 100px; margin-bottom: 10px; }
        button { padding: 8px 15px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        .like-button { background: #f0f0f0; color: #333; padding: 5px 10px; margin-top: 10px; }
        .replies { margin-left: 20px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>社内報フィードバック掲示板</h1>
    
    <div class="post-form">
        <h2>新規投稿</h2>
        <textarea id="post-content" placeholder="ここに投稿内容を入力してください..."></textarea>
        <button onclick="addPost()">投稿する</button>
    </div>
    
    <div id="posts-container">
        <!-- 投稿がここに表示されます -->
    </div>

    <script>
        // LocalStorageからデータを読み込む
        let posts = JSON.parse(localStorage.getItem('posts')) || [];
        
        // 画面表示時に投稿を表示
        displayPosts();
        
        // 新規投稿を追加
        function addPost() {
            const content = document.getElementById('post-content').value;
            if (content.trim() === '') return;
            
            const post = {
                id: Date.now(),
                content: content,
                likes: 0,
                replies: [],
                timestamp: new Date().toLocaleString()
            };
            
            posts.unshift(post); // 配列の先頭に追加
            savePosts();
            displayPosts();
            document.getElementById('post-content').value = '';
        }
        
        // いいねを追加
        function likePost(id) {
            const post = posts.find(p => p.id === id);
            if (post) {
                post.likes++;
                savePosts();
                displayPosts();
            }
        }
        
        // 返信を追加
        function addReply(postId) {
            const replyContent = document.getElementById(`reply-${postId}`).value;
            if (replyContent.trim() === '') return;
            
            const post = posts.find(p => p.id === postId);
            if (post) {
                post.replies.push({
                    content: replyContent,
                    timestamp: new Date().toLocaleString()
                });
                savePosts();
                displayPosts();
            }
        }
        
        // 投稿を表示
        function displayPosts() {
            const container = document.getElementById('posts-container');
            container.innerHTML = '';
            
            posts.forEach(post => {
                let postHTML = `
                    <div class="post">
                        <div>${post.content}</div>
                        <small>${post.timestamp}</small>
                        <button class="like-button" onclick="likePost(${post.id})">👍 ${post.likes}</button>
                        
                        <div class="replies">
                            ${post.replies.map(reply => `
                                <div class="reply">
                                    <div>${reply.content}</div>
                                    <small>${reply.timestamp}</small>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="reply-form">
                            <textarea id="reply-${post.id}" placeholder="返信を入力..."></textarea>
                            <button onclick="addReply(${post.id})">返信する</button>
                        </div>
                    </div>
                `;
                
                container.innerHTML += postHTML;
            });
        }
        
        // データを保存
        function savePosts() {
            localStorage.setItem('posts', JSON.stringify(posts));
        }
    </script>
</body>
</html>
